{% extends "base.html" %}
{% load staticfiles %}
{% load widget_tweaks %}

{% block page_title %}Checkout{% endblock %}

{% block content %}
<div class="bh-position bh-position-light bh-position-title">
    <div class="uk-container uk-container-center">
        <div class="uk-panel">
            <h1>Checkout</h1>
        </div>
    </div>
</div>

<div class="bh-position">
    <div class="uk-container uk-container-center">

        <ul class="uk-breadcrumb">
            <li><a href="{% url 'home' %}">Home</a></li>
            <li><a href="{% url 'book' %}">Book</a></li>
            <li class="uk-active"><span>Checkout</span></li>
        </ul>

        <article class="uk-article">
            <div class="uk-grid" data-uk-grid-margin>
                <div class="uk-width-1-1">
                    {% if request.user.is_authenticated %}
                    <div class="uk-alert uk-margin-bottom-remove uk-alert-success">
                        <i class="uk-icon-check uk-margin-right"></i>Welcome back!
                    </div>

                    {% else %}
                    <div class="uk-alert uk-margin-bottom-remove">
                        <i class="uk-icon-info-circle uk-margin-right"></i>Returning customer? <br class="uk-visible-small"><a href="#" data-uk-toggle="{target:'#checkout-login', animation: 'uk-animation-fade'}">Click here to login</a>
                    </div>
                    <div class="uk-panel uk-panel-space uk-hidden" id="checkout-login">
                        <form method="POST" class="uk-form" id="login-form">
                            {% csrf_token %}
                            <div class="uk-grid" data-uk-margin="{cls:'uk-margin-top'}">
                                {% if login_form.errors %}
                                    <div class="uk-width-1-1">
                                        <div class="uk-alert uk-alert-danger ">
                                            {% if login_form.non_field_errors %}
                                                {% for error in login_form.non_field_errors %}
                                                    <p>{{error}}</p>
                                                {% endfor %}
                                            {% else %}
                                                There was a problem signing in. Please check the form and make sure that everything is filled out correctly.
                                            {% endif %}

                                        </div>
                                    </div>
                                {% endif %}

                                <div class="uk-width-1-1 uk-text-center">
                                    <h3>I'm already a member</h3>
                                    <p>Welcome back!</p>
                                </div>
                                    <div class="uk-width-1-2">
                                        {% include "registration/field_snippet.html" with field=login_form.username %}
                                    </div>
                                    <div class="uk-width-1-2">
                                        {% include "registration/field_snippet.html" with field=login_form.password %}
                                    </div>
                                <div class="uk-width-1-1">
                                    <button class="uk-button uk-text-center">Login</button>
                                        <label class="uk-margin-left">{{login_form.remember_me}} {{login_form.remember_me.label}}</label>


                                    <a class="uk-margin-left" href="{% url 'password' %}">Lost Password?</a>
                                </div>
                            </div>
                        </form>
                     </div>
                </div>
                  {% endif %}


                <div class="uk-width-1-1">
                    <div class="uk-alert uk-margin-bottom-remove">
                        <i class="uk-icon-info-circle uk-margin-right"></i>Have a Coupon? <br class="uk-visible-small"><a href="#" data-uk-toggle="{target:'#checkout-coupon', animation: 'uk-animation-fade'}">Click here to enter your code</a>
                    </div>
                    <div class="uk-panel uk-panel-space uk-hidden" id="checkout-coupon">
                        <form class="uk-form" id="coupon-form" method="POST">
                            {% csrf_token %}
                            {% if coupon_form.errors %}
                                <div class="uk-width-1-1">
                                    <div class="uk-alert uk-alert-danger ">
                                        {% if coupon_form.non_field_errors %}
                                            {% for error in coupon_form.non_field_errors %}
                                                <p>{{error}}</p>
                                            {% endfor %}
                                        {% else %}
                                            There was a problem checking your coupon. Please check the form and make sure that everything is filled out correctly.
                                        {% endif %}
                                    </div>
                                </div>
                            {% endif %}
                            <label class="uk-form-label" for="coupon_code">{{coupon_form.coupon_code.label}}</label>
                            {% if coupon_form.coupon_code.errors %}
                                {% render_field coupon_form.coupon_code placeholder="Coupon Code..." class+="uk-width-1-2 uk-form-danger" %}
                                {{coupon_form.coupon_code.errors}}
                            {% else %}
                                {% render_field coupon_form.coupon_code placeholder="Coupon Code..." class+="uk-width-1-2" %}
                            {% endif %}
                            <button class="uk-button">Apply Coupon</button>
                        </form>
                    </div>
                </div>


                <div class="uk-width-medium-1-2">
                    <h2 class="bh-headline-bottom-border"><span>Location of Appointment</span></h2>
                    <div class="uk-form uk-form-stacked">
                        <div class="uk-grid" data-uk-margin="{cls:'uk-margin-small-top'}">
                            <div class="uk-width-1-1">
                                <label class="uk-form-label" for="shop-checkout-shipping-company">Company Name (optional)</label>
                                <input type="text" class="uk-form-large uk-width-1-1" id="shop-checkout-shipping-company">
                            </div>

                            <div class="uk-width-1-1">
                                <label class="uk-form-label" for="address">{{checkout_form.address.label}}</label>
                                {% if checkout_form.address.errors %}
                                    {% render_field checkout_form.address class+="uk-form-large uk-width-1-1 uk-form-danger" %}
                                {% else %}
                                    {% render_field checkout_form.address class+="uk-form-large uk-width-1-1" %}
                                {% endif %}
                                {{checkout_form.address.errors}}
                            </div>

                            <div class="uk-width-1-2">
                                 <label class="uk-form-label" for="city">{{checkout_form.city.label}}</label>
                                {% if checkout_form.city.errors %}
                                    {% render_field checkout_form.city class+="uk-form-large uk-width-1-1 uk-form-danger" %}
                                {% else %}
                                    {% render_field checkout_form.city class+="uk-form-large uk-width-1-1" %}
                                {% endif %}
                                {{checkout_form.city.errors}}
                            </div>

                            <div class="uk-width-1-2">
                                <label class="uk-form-label" for="zip_code">{{checkout_form.zip_code.label}}</label>
                                {% if checkout_form.zip_code.errors %}
                                    {% render_field checkout_form.zip_code class+="uk-form-large uk-width-1-1 uk-form-danger" %}
                                {% else %}
                                    {% render_field checkout_form.zip_code class+="uk-form-large uk-width-1-1" %}
                                {% endif %}
                                {{checkout_form.zip_code.errors}}
                            </div>

                            <div class="uk-width-1-1">
                                <label class="uk-form-label" for="shop-checkout-note">Other Notes</label>
                                <textarea rows="5" class="uk-form-large uk-width-1-1" placeholder="Notes about your order, special notes regarding your appointment" id="shop-checkout-note"></textarea>
                            </div>

                        </div>
                    </div>
                </div>
                {% if user.is_authenticated %}
                <div class="uk-width-medium-1-2">
                </div>
                {% else %}
                <div class="uk-width-medium-1-2">
                    <h2 class="bh-headline-bottom-border"><span>Billing Information</span></h2>
                    <div class="uk-form uk-form-stacked">
                        <button class="uk-button uk-button-success uk-margin-small-top" type="button"><i class="uk-icon-info-circle"></i> Same as appointment location? Click me</button><br><br>
                        <div class="uk-grid" data-uk-margin="{cls:'uk-margin-small-top'}">

                            <div class="uk-width-1-2">
                                <label class="uk-form-label" for="first_name">{{checkout_form.first_name.label}}</label>
                                {% if checkout_form.first_name.errors %}
                                    {% render_field checkout_form.first_name class+="uk-form-large uk-width-1-1 uk-form-danger" %}
                                {% else %}
                                    {% render_field checkout_form.first_name class+="uk-form-large uk-width-1-1" %}
                                {% endif %}
                                {{checkout_form.first_name.errors}}
                            </div>

                            <div class="uk-width-1-2">
                                <label class="uk-form-label" for="last_name">{{checkout_form.last_name.label}}</label>
                                {% if checkout_form.last_name.errors %}
                                    {% render_field checkout_form.last_name class+="uk-form-large uk-width-1-1 uk-form-danger" %}
                                {% else %}
                                    {% render_field checkout_form.last_name class+="uk-form-large uk-width-1-1" %}
                                {% endif %}
                                {{checkout_form.last_name.errors}}
                            </div>

                            <div class="uk-width-1-1">
                                 <label class="uk-form-label" for="billing_address">{{checkout_form.billing_address.label}}</label>
                                {% if checkout_form.billing_address.errors %}
                                    {% render_field checkout_form.billing_address class+="uk-form-large uk-width-1-1 uk-form-danger" %}
                                {% else %}
                                    {% render_field checkout_form.billing_address class+="uk-form-large uk-width-1-1" %}
                                {% endif %}
                                {{checkout_form.billing_address.errors}}
                            </div>

                            <div class="uk-width-1-2">
                                <label class="uk-form-label" for="billing_city">{{checkout_form.billing_city.label}}</label>
                                {% if checkout_form.billing_city.errors %}
                                    {% render_field checkout_form.billing_city class+="uk-form-large uk-width-1-1 uk-form-danger" %}
                                {% else %}
                                    {% render_field checkout_form.billing_city class+="uk-form-large uk-width-1-1" %}
                                {% endif %}
                                {{checkout_form.billing_city.errors}}
                            </div>

                            <div class="uk-width-1-2">
                                <label class="uk-form-label" for="billing_zip_code">{{checkout_form.billing_zip_code.label}}</label>
                                {% if checkout_form.billing_zip_code.errors %}
                                    {% render_field checkout_form.billing_zip_code class+="uk-form-large uk-width-1-1 uk-form-danger" %}
                                {% else %}
                                    {% render_field checkout_form.billing_zip_code class+="uk-form-large uk-width-1-1" %}
                                {% endif %}
                                {{checkout_form.billing_zip_code.errors}}
                            </div>

                            <div class="uk-width-1-1">
                                <label class="uk-form-label" for="email_address">{{checkout_form.email_address.label}}</label>
                                {% if checkout_form.email_address.errors %}
                                    {% render_field checkout_form.email_address class+="uk-form-large uk-width-1-1 uk-form-danger" %}
                                {% else %}
                                    {% render_field checkout_form.email_address class+="uk-form-large uk-width-1-1" %}
                                {% endif %}
                                {{checkout_form.email_address.errors}}
                            </div>

                            <div class="uk-width-1-1">
                                <label class="uk-form-label" for="phone_number">{{checkout_form.phone_number.label}}</label>
                                {% if checkout_form.phone_number.errors %}
                                    {% render_field checkout_form.phone_number class+="uk-form-large uk-width-1-1 uk-form-danger" %}
                                {% else %}
                                    {% render_field checkout_form.phone_number class+="uk-form-large uk-width-1-1" %}
                                {% endif %}
                                {{checkout_form.phone_number.errors}}
                            </div>
                            <div class="uk-form-row">
                                <label><input type="checkbox" value="Create an Account" checked> Create an Account (allows rescheduling)</label>
                            </div>
                        </div>
                    </div>
                </div>
            {% endif %}
            </div>
            <div class="uk-grid uk-margin-large-top" data-uk-grid-margin>
                <div class="uk-width-medium-1-2">
                        <h2 class="bh-headline-bottom-border"><span>Schedule Your Appointment</span></h2>
                        <!-- BUTTON FOR PEOPLE WHO DONT WANT TO SCHEDULE RIGHT NOT AND JUST WANT TO STORE THEIR APPOINTMENTS UNDER THEIR ACCOUNT -->
                    <div class="uk-panel" id="booking-datepicker">qw
                    </div>
                    {% render_field checkout_form.date %}
                    {% render_field checkout_form.time class+="uk-form-large uk-width-1-1" %}
{#                    <div class="uk-grid" data-uk-margin="{cls:'uk-margin-small-top'}">#}
                </div>
                <div class="uk-width-medium-1-2">qwssw
                </div>
            </div>
            <div class="uk-grid uk-margin-large-top" data-uk-grid-margin>

                <div class="uk-width-1-1">
                    <h2 class="bh-headline-bottom-border"><span>Your order</span></h2>
                    <div class="uk-overflow-container">
                        <table class="uk-table uk-table-middle uk-text-nowrap">
                            <thead>
                                <tr>
                                    <th>Product</th>
                                    <th>Description</th>
                                    <th class="uk-text-center">Size</th>
                                    <th class="uk-text-center">Quantity</th>
                                    <th class="uk-text-center">Total</th>
                                    <th class="uk-text-center">Delete</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>
                                        <a href="shop-singleproduct.html">
                                            <img src="http://placehold.it/100x75&text=demo" width="100" height="75" alt="Product Image">
                                        </a>
                                    </td>
                                    <td>
                                        <a class="bh-text-uppercase uk-link-reset" href="shop-singleproduct.html">Workboots</a><br>
                                        <span class="uk-text-muted uk-text-small">No. 0977450240002</span>
                                    </td>
                                    <td class="uk-text-center">-</td>
                                    <td class="uk-text-center"><form class="uk-form"><input class="uk-form-width-mini" type="number" placeholder="1"></form></td>
                                    <td class="uk-text-center">$119.90</td>
                                    <td class="uk-text-center"><i class="uk-icon-times"></i></td>
                                </tr>
                                <tr>
                                    <td>
                                        <a href="shop-singleproduct.html">
                                            <img src="http://placehold.it/100x75&text=demo" width="100" height="75" alt="Product Image">
                                        </a>
                                    </td>
                                    <td>
                                        <a class="bh-text-uppercase uk-link-reset" href="shop-singleproduct.html">Wayfarer Glasses</a><br>
                                        <span class="uk-text-muted uk-text-small">No. 0977450240003</span>
                                    </td>
                                    <td class="uk-text-center">-</td>
                                    <td class="uk-text-center"><form class="uk-form"><input class="uk-form-width-mini" type="number" placeholder="1"></form></td>
                                    <td class="uk-text-center">$89.90</td>
                                    <td class="uk-text-center"><i class="uk-icon-times"></i></td>
                                </tr>
                            </tbody>
                        </table>
                        <div class="uk-grid">
                            <div class="uk-width-medium-1-2">
                                <h2 class="bh-headline-bottom-border"><span>Select payment method</span></h2>
                                <div class="uk-panel">
                                    <label><input class="uk-margin-right" type="radio" name="shop-payment">Previously Saved Card</label><br>
                                    <p>Please note that charges do not go through until the DAY OF your appointment. This is to allow you to cancel and reschedule freely. PLEASE NOTE ALL TIPS MUST BE IN CASH.</p>
                                </div>
                                <hr>
                                <div class="uk-panel">
                                    <label><input class="uk-margin-right" type="radio" name="shop-payment"> Cheque Payment</label><br>
                                    <button class="uk-button uk-button-primary">Place order</button>
                                    <label for="save-new-card">Save card?</label>
                                    <input class="uk-margin-right" type="checkbox" name="save-new-card">
                                </div>
                                <hr>
                                <div class="uk-panel">
                                    <label><input class="uk-margin-right" type="radio" name="shop-payment"> Paypal</label><br>
                                    <p>Qui animated corpse, cricket bat max brucks terribilem incessu zomby. The voodoo sacerdos flesh eater, suscitat mortuos comedere carnem virus. Zonbi tattered for solum oculi.</p>
                                </div>     
                            </div>                      
                            <div class="uk-width-medium-1-2">
                                <div class="uk-panel uk-panel-space">
                                    <span class="uk-float-left">Cart Subtotal</span>
                                    <span class="uk-float-right">$209.80</span>
                                    <br>
                                    <hr>
                                    <span class="uk-float-left">Order Total Price</span>
                                    <span class="uk-float-right">$209.80</span>
                                    <br />
                                    <hr />
                                    <span class="uk-float-left"><i class="uk-icon-money uk-text-large"></i> ALL TIPS SHOULD BE MADE IN CASH <i class="uk-icon-money uk-text-large"></i><br />Also stylists do not carry cash on so we can not break large bills</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="uk-width-1-1">
                    <button class="uk-button uk-button-primary">Place order</button>
                </div>

            </div>
        </article>

    </div>
</div>
{% endblock %}